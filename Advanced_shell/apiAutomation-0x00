#!/bin/bash

# This script makes a request to the Pokémon API to get data for Pikachu.
# It saves the response to data.json and logs any errors to errors.txt.

# The name of the Pokémon to fetch
POKEMON="pikachu"

# The URL for the Pokémon API
API_URL="https://pokeapi.co/api/v2/pokemon/$POKEMON"

# Make the API request using curl
# -s: silent mode
# -f: fail silently (no output on HTTP errors)
# -o: output file
# The 2> errors.txt redirects stderr to the errors.txt file
if curl -sf "$API_URL" -o data.json; then
  echo "Pikachu data saved to data.json"
else
  echo "Failed to fetch data for $POKEMON. Check errors.txt for details." >&2
  # The API doesn't provide a useful error body on failure, so we'll write our own message
  echo "Error fetching data for $POKEMON from $API_URL" > errors.txt
fi
